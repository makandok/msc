window.CDBUI={},CDBUI.Navbar=Backbone.View.extend({el:".offcanvas-inner",events:{"click .navbar-button":"_toggle"},initialize:function(){this.model=new Backbone.Model({hidden:!0}),this.model.on("change:hidden",this._toggleNav,this)},_toggle:function(a){a.preventDefault(),this.model.set("hidden",!this.model.get("hidden"))},_toggleNav:function(){this.model.get("hidden")?this.$el.removeClass("active"):this.$el.addClass("active")}}),CDBUI.Tooltip=Backbone.View.extend({el:".tooltip-container",events:{click:"_onClickTooltip","click .tooltip-link":"_onClickTooltipLink"},initialize:function(){this.$tooltip=this.$(".tooltip"),this.model=new Backbone.Model({hidden:!0}),this.model.on("change:hidden",this._toggleTooltip,this)},_onClickTooltip:function(a){$(a.target).is(".tooltip-item")||(a.preventDefault(),a.stopPropagation())},_onClickTooltipLink:function(a){a.preventDefault(),a.stopPropagation(),this.model.get("hidden")?(this.open(),this.$el.addClass("selected")):(this.close(),this.$el.removeClass("selected"))},toggle:function(){this.model.set("hidden",!this.model.get("hidden"))},open:function(){this.model.set("hidden",!1)},close:function(){this.model.set("hidden",!0)},_openTooltip:function(){this.$tooltip.css({display:"block",top:36}).animate({opacity:1,top:46},150)},_closeTooltip:function(){var a=this;this.$tooltip.animate({opacity:0,top:56},150,function(){a.$tooltip.hide()})},_toggleTooltip:function(){this.model.get("hidden")?this._closeTooltip():this._openTooltip()}}),window.App={Models:{},Collections:{},Views:{},Routers:{}},App.Views.Index=Backbone.View.extend({el:"body",events:{click:"_closeDialogs"},initialize:function(){this._initViews(),this._initRoute()},_initRoute:function(){var a=L.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),b=this.map=L.map("MapFooter",{scrollWheelZoom:!1,center:[40.7144,-73.95778],zoom:14,zoomControl:!1});b.addLayer(a),b.attributionControl.setPrefix("");L.marker([40.7144,-73.95778],{icon:L.icon({iconUrl:"http://cartodb.com/v/home/img/marker.png",iconSize:[113,113]})}).addTo(b)},_closeDialogs:function(){this.tooltip.close()},_initViews:function(){this.tooltip=new CDBUI.Tooltip,this.navbar=new CDBUI.Navbar}}),$(function(){window.Index=new App.Views.Index});