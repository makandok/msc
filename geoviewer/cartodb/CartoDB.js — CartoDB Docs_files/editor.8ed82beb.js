docs.Views.Editor=Backbone.View.extend({el:document.body,events:{"click .up":"_goToTop"},initialize:function(){this.$aside=this.$(".aside"),this.navbarHeight=this.$(".navbar").outerHeight(),this.$footer=this.$(".footer"),this.$content=this.$(".content"),this.$aside_menu=this.$(".aside-menu"),this.$up=this.$(".up"),this._initViews(),this._initBindings(),this.$("input, textarea").placeholder()},_initBindings:function(){var a=this;$(window).on("scroll",function(){a._onScroll()}).on("resize",function(){a._onScroll()}),this.$content.find("h2, h3, h4").waypoint(function(b){a._waypoint(b,this),a.api=a.$aside.find(".aside-fixed").jScrollPane({contentWidth:"0px"}).data().jsp},{offset:123}),this.$el.find(".anchor").on("click",function(b){b.preventDefault();var c=this.href,d=c.split("#")[1];a._goTo($('[id="'+d+'"]'),{margin:119},function(){history.pushState?history.pushState(null,null,c):window.location.hash=c})})},_onResize:function(){var a=$(window).outerHeight()-this.navbarHeight;this.$content.css({"min-height":a}),this.$aside.find(".aside-fixed").height(a)},_onScroll:function(){var a=$(window).scrollTop(),b=this.$aside.find(".aside-inner").outerHeight();a>=$(window).outerHeight()?this.$up.fadeIn(150):b>a&&this.$up.fadeOut(150),a+this.navbarHeight+b>this.$footer.offset().top?this.$aside.hasClass("bottom")||this.$aside.addClass("bottom"):(this._onResize(),this.$aside.hasClass("bottom")&&this.$aside.removeClass("bottom")),this.api=this.$aside.find(".aside-fixed").jScrollPane({contentWidth:"0px"}).data().jsp},_waypoint:function(a,b){var c=$(b),d=c.attr("id");$(".aside-menu").find('a[href="#'+d+'"]').closest("li").addClass("selected"),c.length||c.end("h2"),$(".aside-menu").find(".selected").removeClass("selected");var e=$(".aside-menu").find("a[href='#"+d+"']").addClass("selected");e.closest(".item").addClass("selected").find("h3 a").addClass("selected")},_buildAnchors:function(){this.$content.find("h2, h3, h4, h5").each(function(a,b){var c,d,e;return c=$(b),d="<i></i>",e=c.attr("id"),e?c.append($("<a />").addClass("anchor header-link").attr("href","#"+e).html(d)):void 0})},_buildToc:function(a){var b,c,d,e=this;this.$content.find("h2").each(function(){b=$(this),c=b.text(),d="#"+b.attr("id");var a,f,g,h=$('<li class="item">');h.append("<h3><a href='"+d+"' class='anchor'>"+c+"</a></h3>");var i=$("<ul>");h.append(i),$(this).nextAll("h4, h3, h2").each(function(){if(a=$(this),a.is("h2"))return!1;f=a.html(),g="#"+a.attr("id");var b=a.is("h4")?"indent":"";i.append("<li class='"+b+"'><a href='"+g+"' class='anchor'>"+f+"</a></li>")}),e.$aside_menu.append(h)}),a&&a()},_initViews:function(){var a=this;this._onResize(),this._buildToc(function(){a.api=a.$aside.find(".aside-fixed").jScrollPane({contentWidth:"0px"}).data().jsp}),this._buildAnchors(),this.navbar=new docs.ui.Views.Navbar},_goToTop:function(a){a.preventDefault(),$("html, body").animate({scrollTop:0},150)},_goTo:function(a,b,c){if(a){var d=b&&b.speed||150,e=b&&b.delay||0,f=b&&b.margin||0;$("html, body").delay(e).animate({scrollTop:a.offset().top-f},d),setTimeout(function(){c&&c()},e)}}}),$(function(){window.index=new docs.Views.Editor});